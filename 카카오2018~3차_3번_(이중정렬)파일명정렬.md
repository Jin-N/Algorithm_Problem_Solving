```python
import re
def solution(files):
    refine = []                                 # files의 각 요소를 [head, number, tail]로 분해하여 2차 리스트로 만든다.
    for file in files:
        m = re.match('(\D+)(\d{1,5})([\d\D]*)', file)
        refine.append(m.groups())
    
    refine.sort(key=lambda x: x[0].lower())     # head로 정렬, 그 후 꺼내기 쉽게 deque으로 변환
    temp = []                                   # head가 같은 것끼리 앞에서 잘라가며 ans에 extend
    ans = []                                    # 정렬된 temp를 담을 배열
    for word in refine:
        if len(temp) and word[0].lower() != temp[-1][0].lower():
            temp.sort(key=lambda x: int(x[1]))
            ans.extend(temp)
            temp = []                    
        temp.append(word)
    
    temp.sort(key=lambda x: int(x[1]))
    ans.extend(temp)
    return [ ''.join(elem) for elem in ans ]
```

